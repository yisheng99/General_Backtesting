How to backtest your trading strategy?

Backtesting is a way to evaluate the performance of a trading strategy or model by applying it to historical data and seeing how it would have played out. The are many ways to backtest a strategy - plotting graph etc.

I choose two US stocks - Meta and Azeta and apply a simple trading strategy (long when undervalue, short when overvalue relative to market) and backtest this strategy. The focus of this is not to show the profit/loss, but rather how to backtest the strategy using the steps below:

1) Calculate the returns of stocks relative to market
2) Calculate the allocation of capital to different stocks within a portfolio.
3) Calculate the strategy's return
4) Calculating post-trading cost's return and Sharpe ratio
